<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.ephr.controllers.MainEPHRController"
            prefWidth="1000" prefHeight="700">

    <!-- Top: Navigation Bar -->
    <top>
        <HBox spacing="10" style="-fx-background-color: #2a9df4; -fx-padding: 10;">
            <Button text="Appointments" fx:id="appointmentsButton"/>
            <Button text="Reports" fx:id="reportsButton"/>
            <Button text="Prescriptions" fx:id="prescriptionsButton"/>
            <Button text="Logout" onAction="#handleLogout" style="-fx-background-color: red; -fx-text-fill: white;" />
        </HBox>
    </top>

    <!-- Center: Main Content Area -->
    <center>
        <VBox spacing="15" alignment="TOP_CENTER" style="-fx-padding: 20;">

            <!-- ðŸ“‹ Patient Records Table -->
            <BorderPane>
                <center>
                    <Label text="All Patient Records" fx:id="recordsLabel" visible="false"
                        style="-fx-font-size: 16px; -fx-font-weight: bold;" />
                </center>
                <right>
                    <Button fx:id="refreshButton" text="ðŸ”„ Refresh" onAction="#handleRefreshTable" visible="false"/>
                </right>
            </BorderPane>

            <!-- Patient Details Table -->
            <TableView fx:id="patientTable" visible="false" prefWidth="900" prefHeight="300">
                <columns>
                    <TableColumn fx:id="firstNameCol" text="First Name"/>
                    <TableColumn fx:id="lastNameCol" text="Last Name"/>
                    <TableColumn fx:id="emailCol" text="Email"/>
                    <TableColumn fx:id="genderCol" text="Gender"/>
                    <TableColumn fx:id="dobCol" text="Date of Birth"/>
                    <TableColumn fx:id="nhsCol" text="NHS Number"/>
                    <TableColumn fx:id="statusCol" text="Status"/>
                    <TableColumn fx:id="sharingCol" text="Data Sharing"/>
                    <TableColumn fx:id="scrCol" text="SCR Consent"/>
                </columns>
            </TableView>

            <!-- Add User Section -->
            <TitledPane fx:id="addUserPane" text="Add New User" expanded="false" animated="true">
                <ScrollPane fitToWidth="true" prefHeight="280" hbarPolicy="NEVER">
                    <VBox spacing="10" alignment="TOP_CENTER" style="-fx-padding: 10;">
                        <GridPane hgap="10" vgap="10">
                            <columnConstraints>
                                <ColumnConstraints halignment="RIGHT"/>
                                <ColumnConstraints prefWidth="200"/>
                            </columnConstraints>

                        <Label text="First Name:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <TextField fx:id="firstNameField" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                        <Label text="Last Name:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <TextField fx:id="lastNameField" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                        <Label text="Email:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <TextField fx:id="emailField" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                        <Label text="DOB:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                        <DatePicker fx:id="dobPicker" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                        <Label text="Gender:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                        <ChoiceBox fx:id="genderChoiceBox" GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                        <Label text="Role:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                        <ChoiceBox fx:id="roleChoiceBox" GridPane.rowIndex="5" GridPane.columnIndex="1"/>

                        <Label text="Assigned Doctor:" GridPane.rowIndex="10" GridPane.columnIndex="0"/>
                        <ChoiceBox fx:id="doctorChoiceBox" GridPane.rowIndex="10" GridPane.columnIndex="1"/>

                        <Label text="NHS Number:" GridPane.rowIndex="11" GridPane.columnIndex="0"/>
                        <TextField fx:id="nhsNumberField" GridPane.rowIndex="11" GridPane.columnIndex="1"/>

                        <Label text="Patient Status:" GridPane.rowIndex="12" GridPane.columnIndex="0"/>
                        <ChoiceBox fx:id="statusChoiceBox" GridPane.rowIndex="12" GridPane.columnIndex="1"/>

                        <Label text="Data Sharing Consent:" GridPane.rowIndex="13" GridPane.columnIndex="0"/>
                        <ChoiceBox fx:id="dataSharingChoiceBox" GridPane.rowIndex="13" GridPane.columnIndex="1"/>

                        <Label text="SCR Consent:" GridPane.rowIndex="14" GridPane.columnIndex="0"/>
                        <ChoiceBox fx:id="scrConsentChoiceBox" GridPane.rowIndex="14" GridPane.columnIndex="1"/>

                    </GridPane>

                    <Button text="Create User" onAction="#handleCreateUser"/>
                    <Label fx:id="formStatusLabel" style="-fx-text-fill: red;"/>
                    </VBox>
                </ScrollPane>
            </TitledPane>


        </VBox>
    </center>
</BorderPane>